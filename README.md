## Как запустить?

```
docker-compose build
docker-compose up -d 
```
Во время запуска выполнятся миграции и добавятся некоторые стартовые данные (стартовые склады, типы посылок) в базу данных. Так как было невозможно добавить таким образом пользователя, перед проверкой нужно будет сделать некоторые действия. 

По ссылке http://0.0.0.0:8000/docs указаны все эндпоинты и модели данных для взаимодействия

1) По эндпоинту /user/client нужно создать клиента (ниже приведу тестовые данные для удобства) 
```
{
	"username": 'ООО "ООО"',
	"password": "client",
	"email": "client@test.ru",
	"actual_address": "Казань, Аметьево, 20"
}
```

2) После этого можно будет произвести авторизацию как админ (зеленая кнопка "Authorize" сверху документации), где в поле username нужно вставить "client@test.ru", а в поле password нужно вставить "client"
### Необязательно
Далее по этой ссылке можно перейти к эндпоинту /user/admin и создать админа с этими данными

```
{
	"username": "test_admin",
	"email": "admin@test.ru",
	"password": "test"
}
```
После этого можно будет произвести авторизацию как админ (зеленая кнопка "Authorize" сверху документации), где в поле username нужно вставить "admin@test.ru", а в поле password нужно вставить "test"

После этого можно выполнять запросы как за админа курьерской службы. Админ может добавлять новых клиентов, добвлять новые склады, модерировать заказы (на время проверки я убрал эту возможность, чтобы было удобно проверять)

## Документация

Данная документация написана для RestAPI сервиса для курьерской компании, интегрируемого в системы крупных компаний и постоянных клиентов.

Ссылка на GitHub с проектом:  https://github.com/4okoboi/scb_test_task
По ссылке http://0.0.0.0:8000/docs указаны все эндпоинты и модели данных для взаимодействия

Стек, на котором был разработан этот сервис: Python, FastAPI, PostgreSQL, sqlalchemy, Docker
## Открытые эндпоинты

Данные эндпоинты могут быть использованы без сделанной заранее авторизации. 
* [Login](login.md) : `POST /login/token`
Так же были сделаны несколько ролей для секьюрного взаимодействия с сервисом:
- ROLE_CLIENT (роль, которая позволяет клиентам взаимодействовать с сервисом)
- ROLE_ADMIN (роль, которая позволяет админам курьерской компании модерировать заказы, подключать новых клиентов, добавлять склады)
## Закрытые эндпоинты

Для использования этих эндпоинтов нужна авторизация. Далее будут написаны пути к ним и роли пользователей, которые могут с ними взаимодействовать.

### Модерация складов

Эндпоинты для добавления, показа, обновления и удаления складов курьерской компании:

* Добавить новый склад (ROLE_ADMIN): `POST /warehouse`
При добавлении склада в базу данных также заносятся координаты, полученные по адресу, чтобы в дальнейшем не делать дополнительный запрос на сторонний сервис для подсчета расстояния. 
Также если адрес был введен неверно, поэтому он будет валидироваться/исправляться с помощью сервиса "dadata". 
Так же можно добавить склад в новом городе, после чего в этом городе можно будет создавать заявки

## Добавление клиента

При добавлении клиента обязательно нужно указать "фактический адрес", чтобы при создании новой заявки можно было подбирать ближайший к клиенту склад (если их несколько)

